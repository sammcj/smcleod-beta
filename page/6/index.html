<!doctype html><html class=home lang=en-au><head><meta name=generator content="Hugo 0.104.3"><meta name=viewport content="width=device-width"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=7"><link href=https://smcleod.net/index.xml rel=alternate type=application/rss+xml title=smcleod.net><link href=https://smcleod.net/index.xml rel=feed type=application/rss+xml title=smcleod.net><link rel=icon href=../../favicon.png><link rel="shortcut icon" href=../../favicon.ico type=image/x-icon><link rel=apple-touch-icon href=../../apple-touch-icon.png><link rel=icon href=../../logo.svg type=image/svg+xml><title>smcleod.net</title><link href=../../symbols-nerd-font/symbols-nerd-font.css rel=stylesheet><link href=../../jetbrains-mono/jetbrains-mono.css rel=stylesheet><link type=text/css rel=stylesheet href=https://smcleod.net/css/styles.66349763506489d57ba916836ca1c45e0ac3f667fe4f2a152cf7619a81ad51a060782c6231e1a885e311c2fd9fdc72e95b340fbd9530152e367d478fe56978c5.css integrity="sha512-ZjSXY1BkidV7qRaDbKHEXgrD9mf+TyoVLPdhmoGtUaBgeCxiMeGoheMRwv2f3HLpWzQPvZUwFS42fUeP5Wl4xQ=="><link href=../../atkinson-hyperlegible/atkinson-hyperlegible.css rel=stylesheet><meta name=author content="Sam McLeod"><meta property="og:site_name" content="smcleod.net"><meta property="og:title" content="smcleod.net"><meta property="og:type" content="blog"><meta property="og:image" content="https://smcleod.net/icon512.png"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="mcleod.ne"><meta property="twitter:url" content="https://smcleod.net/"><meta name=twitter:title content="smcleod.net"><meta name=twitter:image content="https://smcleod.net/icon512.png"><link rel=manifest href=../../manifest/index.json></head><body><div id=baseContainer><header class=jumbotronContainer><div class=titleAndSearchContainer><div id=titleContainer><a class=unstyledLink href=../../><img src=../../logo.svg alt=Logo></a><div class=rightOfLogo><div class=titleAndHamburger><h1><a class=unstyledLink href=../../>smcleod.net</a></h1></div><div id=wide_nav><nav><ul id=main-nav><li><a href=../../>Home</a></li><li><a href=../../posts>Posts</a></li><li><a href=https://smcleod.net/pages/about/>About</a></li><li><a href=https://smcleod.net/pages/links/>Links</a></li><li><a href=../../tags>Tags</a></li></ul></nav></div></div></div><div class=search><input id=searchbar type=text placeholder=Search>
<a class=nerdlink onclick=newSearch()>&#xf002;</a></div><script>function newSearch(){let e=searchbar.value.trim();if(!e)return;location.href=`/search?q=${e}`}searchbar.onkeyup=e=>{e.keyCode==13&&newSearch()}</script></div><div id=links><a rel=noreferrer target=_blank class=nerdlink href=../../index.xml>&#xf09e;
<span>RSS</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://github.com/sammcj>&#xf09b;
<span>Github</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://twitter.com/s_mcleod>&#xf099;
<span>Twitter</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://linkedin.com/in/sammcj>&#xf0e1;
<span>LinkedIn</span></a></div></header><div id=contentContainer><div id=content><main><div class=postlist id=postlist><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/07/update-delayed-serial-stonith-design/>Update Delayed Serial STONITH Design</a></h2><p class=date><span title=Date></span>
2016-07-04
|
<span title=Tags></span>
<a href=../../tags/hardware>#hardware</a>
<a href=../../tags/storage>#storage</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/07/update-delayed-serial-stonith-design/><img src=https://smcleod.net/2016/07/update-delayed-serial-stonith-design//noah-kuhn-27481.jpg alt></a><div class=articlePreview><p><p><em>note: This is a follow up post from <a href=https://smcleod.net/tech/2015/07/21/rcd-stonith/>2015-07-21-rcd-stonith</a></em></p><h3 id=a-linux-cluster-base-stonith-provider-for-use-with-modern-pacemaker-clusters>A Linux Cluster Base STONITH provider for use with modern Pacemaker clusters</h3><p>This has since been accepted and merged into Fedora&rsquo;s code base and as such will make it&rsquo;s way to RHEL.</p><ul><li>Source Code: <a href=https://github.com/sammcj/fence_rcd_serial>Github</a></li><li><a href=https://diptrace.com/download/download-diptrace/>Diptrace</a> CAD Design: <a href=https://github.com/sammcj/fence_rcd_serial/tree/master/CAD/STONTH_CAD_DESIGN_V3>Github</a></li><li>I have open sourced the CAD circuit design and made this available within this repo under
<a href=CAD/STONTH_CAD_DESIGN_V3>CAD Design and Schematics</a></li><li>Related RedHat Bug: <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1240868">https://bugzilla.redhat.com/show_bug.cgi?id=1240868</a></li></ul></p><p><a href=https://smcleod.net/2016/07/update-delayed-serial-stonith-design/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/05/monitoring-systemd-units-with-nagios/>Monitoring SystemD Units With Nagios</a></h2><p class=date><span title=Date></span>
2016-05-23
|
<span title=Tags></span>
<a href=../../tags/software>#software</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/05/monitoring-systemd-units-with-nagios/><img src=https://smcleod.net/2016/05/monitoring-systemd-units-with-nagios//feature-laptop.jpg alt></a><div class=articlePreview><p><p><em>Ever forgotten to add a critical service to monitoring?</em></p><p><em>Want to know if a service or process fails without explicitly monitoring every service on a host?</em></p><p>&mldr;Then why not use SystemD&rsquo;s existing knowledge of all the enabled services? Thanks to &lsquo;Kbyte&rsquo; who made a simple Nagios plugin to do just this!</p><p>Screenshot:</p><p><img src=http://kbyte.snowpenguin.org/portal/wp-content/uploads/2014/11/nagios.png alt></p></p><p><a href=https://smcleod.net/2016/05/monitoring-systemd-units-with-nagios/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/>Online Conversion from SQL_ASCII to UTF8 in PostgreSQL</a></h2><p class=date><span title=Date></span>
2016-05-23
|
<span title=Tags></span>
<a href=../../tags/data>#data</a>
<a href=../../tags/software>#software</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/><img src=https://smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql//patrick-tomasso-71909.jpg alt></a><div class=articlePreview><p><p>Scripts and source available here: <a href=https://github.com/sammcj/sql_ascii_to_utf8>sql_ascii_to_utf8</a></p><h2 id=the-goal>The Goal</h2><p>To be able to take a Postgres Database which is in SQL_ASCII encoding, and import it into a UTF8 encoded database.</p><p>Requirements:</p><ul><li>Python3 (For RHEL/CentOS 7 <code>yum install python34</code>)</li><li>python-nagiosplugin <a href="https://packagecloud.io/app/s_mcleod/centos7/search?q=python-nagiosplugin">My pre-built RPMs</a> or <code>pip3 install nagiosplugin</code></li><li><a href=https://github.com/kbytesys/pynagsystemd/blob/master/bin/pynagsystemd.py>PyNagSystemD</a></li></ul><h2 id=the-problem>The Problem</h2><p>Postresql will generate errors like this if it encounters any non-UTF8 byte-sequences during a database restore:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6272a4># pg_dump -Fc test_badchar | pg_restore -d test_badchar_utf8</span>
</span></span><span style=display:flex><span>pg_restore: <span style=color:#ff79c6>[</span>archiver <span style=color:#ff79c6>(</span>db<span style=color:#ff79c6>)]</span> Error <span style=color:#ff79c6>while</span> PROCESSING TOC:
</span></span><span style=display:flex><span>pg_restore: <span style=color:#ff79c6>[</span>archiver <span style=color:#ff79c6>(</span>db<span style=color:#ff79c6>)]</span> Error from TOC entry 2839; <span style=color:#bd93f9>0</span> <span style=color:#bd93f9>26852</span> TABLE DATA table101 postgres
</span></span><span style=display:flex><span>pg_restore: <span style=color:#ff79c6>[</span>archiver <span style=color:#ff79c6>(</span>db<span style=color:#ff79c6>)]</span> COPY failed <span style=color:#ff79c6>for</span> table <span style=color:#f1fa8c>&#34;table101&#34;</span>: ERROR:  invalid byte sequence <span style=color:#ff79c6>for</span> encoding <span style=color:#f1fa8c>&#34;UTF8&#34;</span>: 0x91
</span></span><span style=display:flex><span>CONTEXT:  COPY table101, line <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>WARNING: errors ignored on restore: <span style=color:#bd93f9>1</span>
</span></span></code></pre></div></p><p><a href=https://smcleod.net/2016/05/online-conversion-from-sql_ascii-to-utf8-in-postgresql/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/05/speeding-up-rsync/>Speeding Up rsync</a></h2><p class=date><span title=Date></span>
2016-05-03
|
<span title=Tags></span>
<a href=../../tags/networking>#networking</a>
<a href=../../tags/software>#software</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/05/speeding-up-rsync/><img src=https://smcleod.net/2016/05/speeding-up-rsync//robin-pierre-323861.jpg alt></a><div class=articlePreview><p><p>The most common way to use rsync is probably as such:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>rsync -avr user@&lt;source&gt;:&lt;source_dir&gt; &lt;dest_dir&gt;
</span></span></code></pre></div><p>Resulting in 30-35MB/s depending on file sizes</p><p>This can be improved by using a more efficient, less secure encryption algorithm, disabling compression
and telling the SSH client to disable some unneeded features that slow things down.</p><p>With the settings below I have achieved 100MB/s (at work between VMs) and over 300MB/s at home between SSD drives.</p></p><p><a href=https://smcleod.net/2016/05/speeding-up-rsync/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/04/benchmarking-io-with-fio/>Benchmarking IO with FIO</a></h2><p class=date><span title=Date></span>
2016-04-29
|
<span title=Tags></span>
<a href=../../tags/storage>#storage</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/04/benchmarking-io-with-fio/><img src=https://smcleod.net/2016/04/benchmarking-io-with-fio//daniel-mayovskiy-303666.jpg alt></a><div class=articlePreview><p><h2 id=this-is-a-quick-tldr-there-are-_many_-other-situations-and-options-you-could-consider>This is a quick tldr there are <em>many</em> other situations and options you could consider</h2><ul><li><a href=http://linux.die.net/man/1/fio>FIO man page</a></li><li>IOP/s = Input or Output operations per second</li><li>Throughput = How many MB/s can you read/write continuously</li></ul></p><p><a href=https://smcleod.net/2016/04/benchmarking-io-with-fio/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2016/02/mirroring-a-gitlab-project-to-github/>Mirroring a Gitlab project to Github</a></h2><p class=date><span title=Date></span>
2016-02-04
|
<span title=Tags></span>
<a href=../../tags/software>#software</a>
<a href=../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2016/02/mirroring-a-gitlab-project-to-github/><img src=https://smcleod.net/2016/02/mirroring-a-gitlab-project-to-github//backdrop-austria.jpg alt></a><div class=articlePreview><p><p>Let&rsquo;s pretend you have a project on Gitlab called <code>ask-izzy</code> and you want to mirror it up to Gitlab which is located at <a href=https://github.com/ask-izzy/ask-izzy>https://github.com/ask-izzy/ask-izzy</a></p><p>Assuming you&rsquo;re running Gitlab as the default user of <code>git</code> and that your repositories are stored in <code>/mnt/repositories</code> you can following something similar to the following instructions:</p><ol><li>Grant write access to Github</li></ol><p>Get your Gitlab install&rsquo;s pubkey from the git user</p></p><p><a href=https://smcleod.net/2016/02/mirroring-a-gitlab-project-to-github/>Continue reading </a></p></div></div><hr></article></div><div id=getNextBtnContainer></div><div id=pageNavigation><a href=../../page/5/ title='Previous page'>&lt;&lt;&lt;</a>
<a href=../../>1</a>
<a href=../../page/2/>2</a>
<a href=../../page/3/>3</a>
<a href=../../page/4/>4</a>
<a href=../../page/5/>5</a>
<span>[6]</span>
<a href=../../page/7/>7</a>
<a href=../../page/8/>8</a>
<a href=../../page/9/>9</a>
<a href=../../page/10/>10</a>
<a href=../../page/11/>11</a>
<a href=../../page/7/ title='Next page'>>>></a></div></main><footer><hr><div class=footerColumns><ul class=notlist><li><strong>Links</strong></li><li><a target=_blank href=https://github.com/sammcj>Github | @sammcj</a></li><li><a target=_blank href=https://twitter.com/s_mcleod>Twitter | @s_mcleod</a></li><li><a target=_blank href=https://smcleod.net>This Website | smcleod.net</a></li></ul></div><p><small>2022 &copy; Sam McLeod</small></p><p><small></small></p></footer></div></div></div></body></html>