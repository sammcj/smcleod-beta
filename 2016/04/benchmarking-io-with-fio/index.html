<!doctype html><html lang=en-au><head><meta name=viewport content="width=device-width"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=7"><link rel=icon href=../../../favicon.png><link rel="shortcut icon" href=../../../favicon.ico type=image/x-icon><link rel=apple-touch-icon href=../../../apple-touch-icon.png><link rel=icon href=../../../logo.svg type=image/svg+xml><title>Benchmarking IO with FIO &ndash;
smcleod.net</title><link href=../../../symbols-nerd-font/symbols-nerd-font.css rel=stylesheet><link href=../../../jetbrains-mono/jetbrains-mono.css rel=stylesheet><link type=text/css rel=stylesheet href=https://smcleod.net/css/styles.66349763506489d57ba916836ca1c45e0ac3f667fe4f2a152cf7619a81ad51a060782c6231e1a885e311c2fd9fdc72e95b340fbd9530152e367d478fe56978c5.css integrity="sha512-ZjSXY1BkidV7qRaDbKHEXgrD9mf+TyoVLPdhmoGtUaBgeCxiMeGoheMRwv2f3HLpWzQPvZUwFS42fUeP5Wl4xQ=="><link href=../../../atkinson-hyperlegible/atkinson-hyperlegible.css rel=stylesheet><meta name=author content="Sam McLeod"><meta name=keywords content="storage,tech"><meta name=description content="ick-tldr-there-are-_many_-other-situations-and-options-you-could-consider&#34;>This is a quick tldr there are <em>many</em> other situations and options you could consider</h2>
<ul>
<li><a href=&#34;http://linux.die.net/man/1/fio&#34;>FIO man page</a></li>
<li>IOP/s = Input or Output operations per second</li>
<li>Throughput = How many MB/s can you read/write continuously</li>
</ul>"><meta property="og:site_name" content="smcleod.net"><meta property="og:title" content="Benchmarking IO with FIO"><meta property="og:type" content="article"><meta property="article:author" content="Sam McLeod"><meta property="article:published_time" content="2016-04-29T00:00:00Z+0000"><meta property="article:tag" content="storage"><meta property="article:tag" content="tech"><meta property="og:url" content="https://smcleod.net/2016/04/benchmarking-io-with-fio/"><meta property="og:image" content="https://smcleod.net/2016/04/benchmarking-io-with-fio//daniel-mayovskiy-303666.jpg"><meta property="og:description" content="<h2 id=&#34;this-is-a-quick-tldr-there-are-_many_-other-situations-and-options-you-could-consider&#34;>This is a quick tldr there are <em>many</em> other situations and"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="mcleod.ne"><meta property="twitter:url" content="https://smcleod.net/2016/04/benchmarking-io-with-fio/"><meta name=twitter:title content="Benchmarking IO with FIO"><meta name=twitter:image content="https://smcleod.net/2016/04/benchmarking-io-with-fio//daniel-mayovskiy-303666.jpg"><meta name=twitter:description content="<h2 id=&#34;this-is-a-quick-tldr-there-are-_many_-other-situations-and-options-you-could-consider&#34;>This is a quick tldr there are <em>many</em> other situations and"><link rel=manifest href=../../../manifest/index.json></head><body><div id=baseContainer><header><div class=titleAndSearchContainer><div id=titleContainer><a class=unstyledLink href=../../../><img src=../../../logo.svg alt=Logo></a><div class=rightOfLogo><div class=titleAndHamburger><h1><a class=unstyledLink href=../../../>smcleod.net</a></h1></div><div id=wide_nav><nav><ul id=main-nav><li><a href=../../../>Home</a></li><li><a href=../../../posts>Posts</a></li><li><a href=https://smcleod.net/pages/about/>About</a></li><li><a href=https://smcleod.net/pages/links/>Links</a></li><li><a href=../../../tags>Tags</a></li></ul></nav></div></div></div><div class=search><input id=searchbar type=text placeholder=Search>
<a class=nerdlink onclick=newSearch()>&#xf002;</a></div><script>function newSearch(){let e=searchbar.value.trim();if(!e)return;location.href=`/search?q=${e}`}searchbar.onkeyup=e=>{e.keyCode==13&&newSearch()}</script></div><div id=links><a rel=noreferrer target=_blank class=nerdlink href=../../../index.xml>&#xf09e;
<span>RSS</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://github.com/sammcj>&#xf09b;
<span>Github</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://twitter.com/s_mcleod>&#xf099;
<span>Twitter</span></a>
<a rel=noreferrer target=_blank class=nerdlink href=https://linkedin.com/in/sammcj>&#xf0e1;
<span>LinkedIn</span></a></div></header><div id=contentContainer><div id=content><main><article class="card single"><h1>Benchmarking IO with FIO</h1><p class=date><span title=Date>ï—¬</span>
2016-04-29</p><figure style=margin:0><img src=https://smcleod.net/2016/04/benchmarking-io-with-fio//daniel-mayovskiy-303666.jpg alt></figure><div><h2 id=this-is-a-quick-tldr-there-are-_many_-other-situations-and-options-you-could-consider>This is a quick tldr there are <em>many</em> other situations and options you could consider</h2><ul><li><a href=http://linux.die.net/man/1/fio>FIO man page</a></li><li>IOP/s = Input or Output operations per second</li><li>Throughput = How many MB/s can you read/write continuously</li></ul><h3 id=variables-worth-tuning-based-on-your-situation>Variables worth tuning based on your situation</h3><ul><li><code>--iodepth</code></li></ul><p>The iodepth is very dependant on your hardware.</p><ul><li><p>Rotational drives without much cache and high latency (i.e. desktop SATA drives) will not benefit from a large iodepth, Values between 16 to 64 could be sensible.</p></li><li><p>High speed, lower latency SSDs (especially NVMe devices) can utilise a much higher iodepth, Values between 256 to 4096 could be sensible.</p></li><li><p><code>--bs</code></p></li></ul><p>The block size is very dependant on your workload.</p><ul><li><p>Writing/Reading lots of small files (i.e. documents, logs) benefit from / represent a smaller block size, Values between 2K - 128K could be sensible and 4k is likely the average in most situations.</p></li><li><p>Writing/Reading large files (i.e. videos, database backups) benefit from / represent a large block size, Values between 2M - 8M could be sensible and 4M is likely the average in most situations.</p></li></ul><h3 id=before-running-these-tests>Before running these tests</h3><ol><li>Check you&rsquo;re in a directory with enough free disk space.</li><li>Check / pause any other workloads that may interfere with the results.</li><li>Understand your workload / what you intend to use the storage for - i.e. what matters?</li><li>Tune anything you might want to tune as above such as <code>iodepth</code> or <code>size</code>.</li></ol><h4 id=random-write-test-for-iops>Random write test for IOP/s</h4><p>i.e. lots of small files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sync;fio --randrepeat<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --ioengine<span style=color:#ff79c6>=</span>libaio --direct<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --gtod_reduce<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --name<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --filename<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --bs<span style=color:#ff79c6>=</span>4k --iodepth<span style=color:#ff79c6>=</span><span style=color:#bd93f9>64</span> --size<span style=color:#ff79c6>=</span>4G --readwrite<span style=color:#ff79c6>=</span>randwrite --ramp_time<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4</span>
</span></span></code></pre></div><h4 id=random-read-test-for-iops>Random Read test for IOP/s</h4><p>i.e. lots of small files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sync;fio --randrepeat<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --ioengine<span style=color:#ff79c6>=</span>libaio --direct<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --gtod_reduce<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --name<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --filename<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --bs<span style=color:#ff79c6>=</span>4k --iodepth<span style=color:#ff79c6>=</span><span style=color:#bd93f9>64</span> --size<span style=color:#ff79c6>=</span>4G --readwrite<span style=color:#ff79c6>=</span>randread --ramp_time<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4</span>
</span></span></code></pre></div><h4 id=sequential-write-test-for-throughput>Sequential write test for throughput</h4><p>i.e. one large file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sync;fio --randrepeat<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --ioengine<span style=color:#ff79c6>=</span>libaio --direct<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --gtod_reduce<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --name<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --filename<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --bs<span style=color:#ff79c6>=</span>4M --iodepth<span style=color:#ff79c6>=</span><span style=color:#bd93f9>64</span> --size<span style=color:#ff79c6>=</span>4G --readwrite<span style=color:#ff79c6>=</span>write --ramp_time<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4</span>
</span></span></code></pre></div><h4 id=sequential-read-test-for-throughput>Sequential Read test for throughput</h4><p>i.e. one large file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sync;fio --randrepeat<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --ioengine<span style=color:#ff79c6>=</span>libaio --direct<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --gtod_reduce<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> --name<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --filename<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>test</span> --bs<span style=color:#ff79c6>=</span>4M --iodepth<span style=color:#ff79c6>=</span><span style=color:#bd93f9>64</span> --size<span style=color:#ff79c6>=</span>4G --readwrite<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>read</span> --ramp_time<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4</span>
</span></span></code></pre></div><h4 id=testing-io-latency-without-fio>Testing IO latency without fio</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>samm@int-backup-01:/mnt/store1  <span style=color:#6272a4># ioping . # old backup server</span>
</span></span><span style=display:flex><span><span style=color:#bd93f9>4096</span> bytes from . <span style=color:#ff79c6>(</span>ext4 /dev/mapper/store1-36TB<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span>0.2 ms
</span></span><span style=display:flex><span><span style=color:#bd93f9>4096</span> bytes from . <span style=color:#ff79c6>(</span>ext4 /dev/mapper/store1-36TB<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span>0.1 ms
</span></span><span style=display:flex><span><span style=color:#bd93f9>4096</span> bytes from . <span style=color:#ff79c6>(</span>ext4 /dev/mapper/store1-36TB<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>3</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span>0.9 ms
</span></span></code></pre></div><p>vs</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>samm@int-backup-02:/mnt/store1  <span style=color:#6272a4># ioping . # new backup server</span>
</span></span><span style=display:flex><span><span style=color:#bd93f9>4</span> KiB from . <span style=color:#ff79c6>(</span>ext4 /dev/md10<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>88</span> us
</span></span><span style=display:flex><span><span style=color:#bd93f9>4</span> KiB from . <span style=color:#ff79c6>(</span>ext4 /dev/md10<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>103</span> us
</span></span><span style=display:flex><span><span style=color:#bd93f9>4</span> KiB from . <span style=color:#ff79c6>(</span>ext4 /dev/md10<span style=color:#ff79c6>)</span>: <span style=color:#8be9fd;font-style:italic>request</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>3</span> <span style=color:#8be9fd;font-style:italic>time</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>102</span> us
</span></span></code></pre></div></div></article><hr><p class=articleTagsContainer><span>ï€«</span>
<strong>Tags:</strong>
<a class=buttonTag href=../../../tags/storage>#storage</a>
<a class=buttonTag href=../../../tags/tech>#tech</a></p><div class=relatedArticlesContainer><hr><h2>More posts like this</h2><div class=postlist><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2022/10/making-work-visible-avoid-dms/>Making Work Visible - Avoid DMs</a></h2><p class=date><span title=Date>ï—¬</span>
2022-10-20
|
<span title=Tags>ï€«</span>
<a href=../../../tags/communication>#communication</a>
<a href=../../../tags/culture>#culture</a>
<a href=../../../tags/tech>#tech</a>
<a href=../../../tags/work>#work</a></p><a class=unstyledLink href=https://smcleod.net/2022/10/making-work-visible-avoid-dms/><img src=https://smcleod.net/2022/10/making-work-visible-avoid-dms//dm-disruption.jpg alt></a><div class=articlePreview><p><h3 id=avoid-sending-dmspms-for-support-and-technical-questions>Avoid sending DMs/PMs for support and technical questions</h3><p>This is a blurb I usually add to the wiki pages of teams I work with, it&rsquo;s a simple reminder that we should avoid sending direct messages (or worse - calling) individuals for support and technical questions.</p><p>Instead, we should use the appropriate channels for the team. This is a simple way to make work visible, share knowledge, reduce context switching, avoid silos and share the support load.</p></p><p><a href=https://smcleod.net/2022/10/making-work-visible-avoid-dms/>Continue reading ï•“</a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://smcleod.net/2019/08/camels-dressed-as-unicorns/>Camels Dressed As Unicorns</a></h2><p class=date><span title=Date>ï—¬</span>
2019-08-08
|
<span title=Tags>ï€«</span>
<a href=../../../tags/career>#career</a>
<a href=../../../tags/devops>#devops</a>
<a href=../../../tags/tech>#tech</a></p><a class=unstyledLink href=https://smcleod.net/2019/08/camels-dressed-as-unicorns/><img src=https://smcleod.net/2019/08/camels-dressed-as-unicorns//camel_corn.jpeg alt></a><div class=articlePreview><p><h2 id=stop-trying-to-hire-with-titles-like-devops-engineer-or-cloud-engineer>Stop trying to hire with titles like â€˜DevOps Engineer&rsquo; or &lsquo;Cloud Engineer&rsquo;</h2><p>&ldquo;DevOps is &mldr; not a job title&rdquo;</p><p>&ldquo;It&rsquo;s more of a cultural practice, like innovation, and it makes just as little sense hiring &ldquo;innovation engineers&rdquo; and expecting your organisation to be innovative, without also creating the culture to foster innovation.&rdquo; (Joel Shea when responding to this posted on <a href=https://www.linkedin.com/posts/activity-6564991913110368256-WxFP>LinkedIn</a>)</p><p>In most cases it&rsquo;s clear the organisation doesn&rsquo;t truly know what they want or need and likely don&rsquo;t understand the nuances of the aspects of engineering.</p><p>The problem is - they&rsquo;re going to end up with a â€˜Camel Dressed As A Unicorn&rsquo; rather than someone with deep or natural engineering understanding in the areas they most need to help see, discuss, solve problems and deliver effective and lasting solutions.</p><p>From the what I&rsquo;ve seen recently companies hiring with &lsquo;DevOps Engineer&rsquo; titles - the organisation (thinks they) want / need a Developer with a little bit of Operations experience - but not a true understanding of Operations or platform engineering.</p><p>I&rsquo;m almost certain they&rsquo;re trying to appeal to the hype (in a genuine effort to find someone highly skilled) but as they&rsquo;re missing the point of where people&rsquo;s skills lay and what those skills mean - they&rsquo;re confusing engineers, recruiters and likely themselves further.</p><h2 id=devops-is-_deeply_-important>DevOps is <em>deeply</em> important</h2><p>Likely the most important thing to succeed at product and systems delivery - but it&rsquo;s not a job title.</p><p>If you need Developers to work in a DevOps culture and environment - say so.</p><p>If you need Operations or Platform Engineers to work in a DevOps culture and environment - say so.</p><p>Staying either of those does not mutually exclude ones abilities to know &lsquo;a bit of the other side&rsquo;, e.g. a Developer that has worked closely with a CI/CD system&rsquo;s backend or Kubernetes Operations, or an Operations Engineer that has worked closely with Developers and Testers and can work with APIs: or whip up some integration scripts when needed.</p></p><p><a href=https://smcleod.net/2019/08/camels-dressed-as-unicorns/>Continue reading ï•“</a></p></div></div><hr></article></div></div></main><footer><hr><div class=footerColumns><ul class=notlist><li><strong>Links</strong></li><li><a target=_blank href=https://github.com/sammcj>Github | @sammcj</a></li><li><a target=_blank href=https://twitter.com/s_mcleod>Twitter | @s_mcleod</a></li><li><a target=_blank href=https://smcleod.net>This Website | smcleod.net</a></li></ul></div><p><small>2022 &copy; Sam McLeod</small></p><p><small></small></p></footer></div></div></div></body></html>